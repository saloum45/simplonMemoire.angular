<div class="panier-left p-lg-2 p-1">
  <div class="section-title">
    <h4>Historiques des ventes</h4>
    <hr />
  </div>
  <div class="table-responsive">
  @if (ventes.length>0) {

    <table datatable [dtOptions]="dtOptions" class="table">
      <thead id="thead">
        <tr>
          <th>Date</th>
          <th>Articles</th>
          <th>Montant</th>
          <th>Paiment</th>
          <th>Livraison</th>
          <th class="last-th">Action</th>
        </tr>
      </thead>
      <tbody>
        @for (item of ventes; track $index) {
        <tr>
          <td>{{ item.date_commande  | date:'medium':'fr'}}</td>
          <td>{{ item.nombre_produit }}</td>
          <td>{{ item.montant_total }}</td>
          <td><img src="https://pbs.twimg.com/profile_images/1416037687128113160/O5-WNBK6_400x400.jpg" alt="" /></td>
          <td>{{ item.etat_commande }}</td>
          <td>
            <i
              class="bi bi-eye"
              data-bs-toggle="modal"
              data-bs-target="#detailsCommande"
              (click)="showVente(item.Id)"
            ></i>
          </td>
        </tr>
        }
      </tbody>
    </table>
    }
</div>
</div>

<!-- Modal -->
<div
  class="modal fade"
  id="detailsCommande"
  data-bs-backdrop="static"
  tabindex="-1"
  aria-labelledby="detailsCommandeLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered p-0 modal-lg">
    <div class="modal-content m-0 px-3 form-container">
      <!-- <div class="form-container px-5"> -->
      <h5 class="fw-bold fs-4 mt-4 text-center mb-3">Produits commandés</h5>
      <!-- <div class="d-flex justify-content-evenly w-100"></div> -->
      <div class="row row-cols-1 row-cols-md-3 g-4">
        @for (item of produitsVentes; track $index) {

          <div class="col" >
            <div class="card" id="card">
              <div class="text-center image" >
                <img src="{{urlBaseImage}}{{item.image}}" alt=""  style="height: 150px;width: 90%;" />
              </div>
              <div class="card-text">
                <h6 class="text-center" >{{item.nom_produit}}</h6>
                <h6 class="text-center" >Quantité : {{item.quantite}}</h6>

              </div>
            </div>
          </div>
        }


      </div>
      <div class="d-flex justify-content-end w-100 mt-3 mb-3">
        <button class="btn w-25" data-bs-dismiss="modal" aria-label="Close">
          Fermer
        </button>
      </div>
    </div>
  </div>
</div>
